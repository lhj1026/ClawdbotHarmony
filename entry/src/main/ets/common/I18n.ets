/**
 * Internationalization (i18n) support.
 * Provides Chinese and English translations for all UI strings.
 * Uses Map<string, string> for ArkTS compatibility (no indexed signatures).
 */

export type LangCode = 'zh' | 'en';

function buildZh(): Map<string, string> {
  let m = new Map<string, string>();
  // Tab bar
  m.set('tab.chat', 'èŠå¤©');
  m.set('tab.skills', 'æŠ€èƒ½');
  m.set('tab.memory', 'è®°å¿†');
  m.set('tab.settings', 'è®¾ç½®');

  // ChatPage
  m.set('chat.title', 'ClawdBot');
  m.set('chat.thinking', 'æ€è€ƒä¸­...');
  m.set('chat.online', 'åœ¨çº¿');
  m.set('chat.gatewayMode', 'ç½‘å…³æ¨¡å¼');
  m.set('chat.placeholder', 'å‘ ClawdBot æé—®...');
  m.set('chat.empty.subtitle', 'ä½ çš„ç§äººAIåŠ©æ‰‹ã€‚\néšæ—¶æé—®æˆ–åˆ†é…ä»»åŠ¡ã€‚');
  m.set('chat.quick.whatCanYouDo', 'ä½ èƒ½åšä»€ä¹ˆï¼Ÿ');
  m.set('chat.quick.setReminder', 'è®¾ç½®æé†’');
  m.set('chat.quick.searchWeb', 'æœç´¢ç½‘é¡µ');
  m.set('chat.quick.smartHome', 'æ™ºèƒ½å®¶å±…çŠ¶æ€');
  m.set('chat.toolResult', 'ç»“æœ');
  m.set('chat.notificationReceived', 'æ”¶åˆ°ç½‘å…³é€šçŸ¥');
  m.set('chat.notificationFrom', 'æ¥è‡ª');
  m.set('chat.playingAudio', 'æ­£åœ¨æ’­æ”¾éŸ³é¢‘...');
  m.set('chat.audioPlayed', 'éŸ³é¢‘å·²æ’­æ”¾');
  m.set('chat.audioFailed', 'éŸ³é¢‘æ’­æ”¾å¤±è´¥');
  m.set('chat.audioReady', 'ç‚¹å‡»æ’­æ”¾å½•éŸ³');
  m.set('chat.audioPlaying', 'æ­£åœ¨æ’­æ”¾...');
  m.set('chat.recording', 'æ­£åœ¨å½•éŸ³...');
  m.set('chat.speechError', 'è¯­éŸ³è¯†åˆ«å¤±è´¥');
  m.set('chat.rateLimited', 'å…è´¹æ¨¡å‹å·²è¾¾åˆ°é€Ÿç‡é™åˆ¶ï¼Œè¯·ç¨åé‡è¯•ã€‚\n\nå¦‚éœ€æ›´ç¨³å®šçš„æœåŠ¡ï¼Œè¯·æ³¨å†Œè‡ªå·±çš„ API Keyï¼š\n\nğŸ“ OpenRouter æ³¨å†Œæ­¥éª¤ï¼š\n1. æ‰“å¼€ openrouter.ai å¹¶ç‚¹å‡»æ³¨å†Œ\n2. ä½¿ç”¨ Google è´¦å·æˆ–é‚®ç®±æ³¨å†Œ\n3. æ³¨å†Œåè¿›å…¥ openrouter.ai/settings/keys\n4. ç‚¹å‡» "Create Key" åˆ›å»ºä¸€ä¸ªæ–°å¯†é’¥\n5. å¤åˆ¶å¯†é’¥ï¼Œå›åˆ°æœ¬ App çš„è®¾ç½®é¡µ\n6. åœ¨ "AI æä¾›å•†" é€‰æ‹© OpenRouter\n7. å°†å¯†é’¥ç²˜è´´åˆ° "API Key" è¾“å…¥æ¡†\n\nğŸ’¡ OpenRouter æä¾›å…è´¹å’Œä»˜è´¹æ¨¡å‹ï¼Œæ³¨å†Œåå…è´¹é¢åº¦æ›´é«˜ï¼Œä¹Ÿå¯æŒ‰éœ€å……å€¼ä½¿ç”¨ GPT-4oã€Claude ç­‰é«˜çº§æ¨¡å‹ã€‚');
  m.set('chat.ttsReading', 'ğŸ”Š æ­£åœ¨æœ—è¯»...');
  m.set('chat.ttsReadDone', 'ğŸ”Š å·²æœ—è¯»');
  m.set('chat.ttsReadFailed', 'æœ—è¯»å¤±è´¥');

  // SettingsPage - TTS auto-read
  m.set('settings.ttsAutoRead', 'è¯­éŸ³æœ—è¯»');
  m.set('settings.ttsAutoReadDesc', 'è‡ªåŠ¨æœ—è¯» AI å›å¤ï¼ˆä½¿ç”¨æœ¬åœ° TTSï¼‰');

  // SkillsPage
  m.set('skills.title', 'æŠ€èƒ½');
  m.set('skills.subtitle', 'å¼€å¯å†…ç½®æŠ€èƒ½ä»¥æ‰©å±• ClawdBot çš„èƒ½åŠ›ã€‚');
  m.set('skills.all', 'å…¨éƒ¨');
  m.set('skills.automation', 'è‡ªåŠ¨åŒ–');
  m.set('skills.productivity', 'æ•ˆç‡');
  m.set('skills.smartHome', 'æ™ºèƒ½å®¶å±…');
  m.set('skills.media', 'åª’ä½“');
  m.set('skills.countSkills', 'é¡¹æŠ€èƒ½');
  m.set('skills.countEnabled', 'å·²å¯ç”¨');
  m.set('skills.countTools', 'ä¸ªå·¥å…·');
  m.set('skills.builtin', 'å†…ç½®');

  // MemoryPage
  m.set('memory.title', 'è®°å¿†');
  m.set('memory.subtitle', 'ClawdBot å¯ä»¥è·¨ä¼šè¯è®°ä½äº‹å®ã€åå¥½å’ŒæŒ‡ä»¤ã€‚');
  m.set('memory.add', '+ æ·»åŠ ');
  m.set('memory.save', 'ä¿å­˜');
  m.set('memory.all', 'å…¨éƒ¨');
  m.set('memory.fact', 'äº‹å®');
  m.set('memory.preference', 'åå¥½');
  m.set('memory.instruction', 'æŒ‡ä»¤');
  m.set('memory.entries', 'æ¡è®°å½•');
  m.set('memory.empty', 'æš‚æ— è®°å¿†');
  m.set('memory.placeholder', 'ClawdBot éœ€è¦è®°ä½ä»€ä¹ˆï¼Ÿ');
  m.set('memory.clearTitle', 'æ¸…é™¤æ‰€æœ‰è®°å¿†');
  m.set('memory.clearMessage', 'ç¡®å®šè¦æ°¸ä¹…åˆ é™¤æ‰€æœ‰å­˜å‚¨çš„è®°å¿†å—ï¼Ÿ');
  m.set('memory.cancel', 'å–æ¶ˆ');
  m.set('memory.clear', 'æ¸…é™¤');

  // SettingsPage
  m.set('settings.title', 'è®¾ç½®');
  m.set('settings.aiProvider', 'AI æœåŠ¡æä¾›å•†');
  m.set('settings.provider', 'æä¾›å•†');
  m.set('settings.apiKey', 'API å¯†é’¥');
  m.set('settings.apiKeyPlaceholder', 'è¾“å…¥ä½ çš„ API å¯†é’¥');
  m.set('settings.apiKeyNotRequired', 'æ— éœ€å¡«å†™');
  m.set('settings.show', 'æ˜¾ç¤º');
  m.set('settings.hide', 'éšè—');
  m.set('settings.model', 'æ¨¡å‹');
  m.set('settings.modelPlaceholder', 'æ¨¡å‹åç§°');
  m.set('settings.baseUrl', 'åŸºç¡€ URL');
  m.set('settings.baseUrlDesc', 'ç•™ç©ºä½¿ç”¨å®˜æ–¹ APIï¼Œå¡«å†™å¯ç”¨äºä»£ç†/ä¸­è½¬æœåŠ¡');
  m.set('settings.generation', 'ç”Ÿæˆå‚æ•°');
  m.set('settings.temperature', 'æ¸©åº¦');
  m.set('settings.gateway', 'ç½‘å…³ / èŠ‚ç‚¹æ¨¡å¼');
  m.set('settings.nodeMode', 'èŠ‚ç‚¹æ¨¡å¼');
  m.set('settings.nodeModeDesc', 'è¿æ¥åˆ° OpenClaw ç½‘å…³');
  m.set('settings.gatewayHost', 'ç½‘å…³ä¸»æœº');
  m.set('settings.gatewayHostPlaceholder', '192.168.1.100 æˆ–ä¸»æœºå');
  m.set('settings.port', 'ç«¯å£');
  m.set('settings.useTls', 'ä½¿ç”¨ TLS (wss://)');
  m.set('settings.token', 'ä»¤ç‰Œ');
  m.set('settings.tokenDesc', 'OpenClaw ç½‘å…³çš„å…±äº«ä»¤ç‰Œ');
  m.set('settings.tokenPlaceholder', 'ä¾‹å¦‚ d71a61ab...');
  m.set('settings.password', 'å¯†ç ï¼ˆå¯é€‰ï¼‰');
  m.set('settings.passwordPlaceholder', 'ç½‘å…³å¯†ç ');
  m.set('settings.status', 'çŠ¶æ€');
  m.set('settings.connect', 'è¿æ¥');
  m.set('settings.disconnect', 'æ–­å¼€');
  m.set('settings.caps', 'èŠ‚ç‚¹èƒ½åŠ›');
  m.set('settings.capLocation', 'å®šä½ (GPS)');
  m.set('settings.capCamera', 'ç›¸æœº (æ‹ç…§/å½•åƒ)');
  m.set('settings.capCanvas', 'ç”»å¸ƒ (WebView)');
  m.set('settings.capScreen', 'æˆªå±/å½•å±');
  m.set('settings.capNotification', 'é€šçŸ¥');
  m.set('settings.capMicrophone', 'éº¦å…‹é£ (å½•éŸ³)');
  m.set('settings.capSpeaker', 'éŸ³ç®± (æœ—è¯»/æ’­æ”¾)');
  m.set('settings.capEmail', 'é‚®ä»¶ (å‘é€)');
  m.set('settings.about', 'å…³äº');
  m.set('settings.app', 'åº”ç”¨');
  m.set('settings.appValue', 'ClawdBot for HarmonyOS');
  m.set('settings.version', 'ç‰ˆæœ¬');
  m.set('settings.basedOn', 'åŸºäº');
  m.set('settings.platform', 'å¹³å°');
  m.set('settings.save', 'ä¿å­˜è®¾ç½®');
  m.set('settings.saved', 'è®¾ç½®å·²ä¿å­˜');
  m.set('settings.saveFailed', 'ä¿å­˜å¤±è´¥ï¼š');
  m.set('settings.enterHost', 'è¯·è¾“å…¥ç½‘å…³ä¸»æœº');
  m.set('settings.language', 'è¯­è¨€');
  m.set('settings.languageDesc', 'ç•Œé¢æ˜¾ç¤ºè¯­è¨€');
  m.set('settings.langZh', 'ä¸­æ–‡');
  m.set('settings.langEn', 'English');

  // LogPage
  m.set('tab.logs', 'æ—¥å¿—');
  m.set('log.title', 'è¿è¡Œæ—¥å¿—');
  m.set('log.clear', 'æ¸…é™¤');
  m.set('log.entries', 'æ¡');
  m.set('log.empty', 'æš‚æ— æ—¥å¿—');
  m.set('log.copy', 'å¤åˆ¶');
  m.set('log.export', 'å¯¼å‡º');
  m.set('log.copied', 'å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
  m.set('log.exported', 'å·²å¯¼å‡ºåˆ°æ–‡ä»¶');
  m.set('log.exportFail', 'å¯¼å‡ºå¤±è´¥');
  m.set('log.recording', 'è®°å½•ä¸­');
  m.set('log.readMore', 'å±•å¼€');
  m.set('log.showLess', 'æ”¶èµ·');
  m.set('log.filePath', 'æ–‡ä»¶è·¯å¾„');

  // LoginPage
  m.set('login.signUpTitle', 'é¦–æ¬¡é…ç½®');
  m.set('login.signInTitle', 'ç™»å½•');
  m.set('login.address', 'ç½‘å…³åœ°å€');
  m.set('login.addressPlaceholder', '192.168.1.100:18789');
  m.set('login.token', 'ä»¤ç‰Œ');
  m.set('login.tokenPlaceholder', 'ç®¡ç†å‘˜åˆ†é…çš„å…±äº«ä»¤ç‰Œ');
  m.set('login.setPassword', 'è®¾ç½®å¯†ç ');
  m.set('login.setPasswordPlaceholder', 'è®¾ç½®ç™»å½•å¯†ç ');
  m.set('login.confirmPassword', 'ç¡®è®¤å¯†ç ');
  m.set('login.confirmPasswordPlaceholder', 'å†æ¬¡è¾“å…¥å¯†ç ');
  m.set('login.password', 'å¯†ç ');
  m.set('login.passwordPlaceholder', 'è¾“å…¥ç™»å½•å¯†ç ');
  m.set('login.signUpButton', 'æ³¨å†Œå¹¶è¿æ¥');
  m.set('login.signInButton', 'ç™»å½•');
  m.set('login.connecting', 'è¿æ¥ä¸­...');
  m.set('login.switchToSignIn', 'å·²æœ‰å¯†ç ï¼Ÿç›´æ¥ç™»å½•');
  m.set('login.switchToSignUp', 'é‡æ–°é…ç½®ç½‘å…³');
  m.set('login.error.emptyAddress', 'è¯·è¾“å…¥ç½‘å…³åœ°å€');
  m.set('login.error.emptyToken', 'è¯·è¾“å…¥ä»¤ç‰Œ');
  m.set('login.error.emptyPassword', 'è¯·è¾“å…¥å¯†ç ');
  m.set('login.error.passwordMismatch', 'ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´');
  m.set('login.error.wrongPassword', 'å¯†ç é”™è¯¯');
  m.set('login.error.authFailed', 'è®¤è¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä»¤ç‰Œ');
  m.set('login.error.connectionFailed', 'è¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥åœ°å€');
  m.set('login.error.timeout', 'è¿æ¥è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ');

  // Settings - Logout
  m.set('settings.logout', 'é€€å‡ºç™»å½•');
  m.set('settings.logoutConfirmTitle', 'é€€å‡ºç™»å½•');
  m.set('settings.logoutConfirmMessage', 'é€€å‡ºåéœ€è¦é‡æ–°è¾“å…¥å¯†ç ç™»å½•ï¼Œç¡®å®šé€€å‡ºï¼Ÿ');
  m.set('settings.cancel', 'å–æ¶ˆ');
  m.set('settings.confirm', 'ç¡®å®š');
  m.set('settings.gatewayAddress', 'ç½‘å…³åœ°å€');

  // Connection states
  m.set('state.offline', 'ç¦»çº¿');
  m.set('state.connecting', 'è¿æ¥ä¸­...');
  m.set('state.connected', 'å·²è¿æ¥');
  m.set('state.reconnecting', 'é‡è¿ä¸­...');
  m.set('state.error', 'é”™è¯¯');

  return m;
}

function buildEn(): Map<string, string> {
  let m = new Map<string, string>();
  // Tab bar
  m.set('tab.chat', 'Chat');
  m.set('tab.skills', 'Skills');
  m.set('tab.memory', 'Memory');
  m.set('tab.settings', 'Settings');

  // ChatPage
  m.set('chat.title', 'ClawdBot');
  m.set('chat.thinking', 'Thinking...');
  m.set('chat.online', 'Online');
  m.set('chat.gatewayMode', 'Gateway Mode');
  m.set('chat.placeholder', 'Ask ClawdBot anything...');
  m.set('chat.empty.subtitle', 'Your personal AI assistant.\nAsk me anything or give me a task.');
  m.set('chat.quick.whatCanYouDo', 'What can you do?');
  m.set('chat.quick.setReminder', 'Set a reminder');
  m.set('chat.quick.searchWeb', 'Search the web');
  m.set('chat.quick.smartHome', 'Smart home status');
  m.set('chat.toolResult', 'result');
  m.set('chat.notificationReceived', 'Gateway Notification');
  m.set('chat.notificationFrom', 'From');
  m.set('chat.playingAudio', 'Playing audio...');
  m.set('chat.audioPlayed', 'Audio played');
  m.set('chat.audioFailed', 'Audio playback failed');
  m.set('chat.audioReady', 'Tap to play recording');
  m.set('chat.audioPlaying', 'Playing...');
  m.set('chat.recording', 'Recording...');
  m.set('chat.speechError', 'Speech recognition failed');
  m.set('chat.rateLimited', 'Free model rate limited. Please retry shortly.\n\nFor stable service, register your own API Key:\n\nğŸ“ OpenRouter Registration:\n1. Go to openrouter.ai and sign up\n2. Register with Google or email\n3. After sign-up, go to openrouter.ai/settings/keys\n4. Click "Create Key" to generate a new key\n5. Copy the key, then open Settings in this app\n6. Select "OpenRouter" as AI Provider\n7. Paste the key into the "API Key" field\n\nğŸ’¡ OpenRouter offers free and paid models. After registration you get higher free limits, and can top up to use premium models like GPT-4o, Claude, etc.');
  m.set('chat.ttsReading', 'ğŸ”Š Reading aloud...');
  m.set('chat.ttsReadDone', 'ğŸ”Š Read aloud');
  m.set('chat.ttsReadFailed', 'TTS read failed');

  // SettingsPage - TTS auto-read
  m.set('settings.ttsAutoRead', 'Auto Read Aloud');
  m.set('settings.ttsAutoReadDesc', 'Auto read AI responses aloud (local TTS)');

  // SkillsPage
  m.set('skills.title', 'Skills');
  m.set('skills.subtitle', "Toggle built-in skills to expand ClawdBot's capabilities.");
  m.set('skills.all', 'All');
  m.set('skills.automation', 'Automation');
  m.set('skills.productivity', 'Productivity');
  m.set('skills.smartHome', 'Smart Home');
  m.set('skills.media', 'Media');
  m.set('skills.countSkills', ' skills');
  m.set('skills.countEnabled', ' enabled');
  m.set('skills.countTools', ' tools');
  m.set('skills.builtin', 'Built-in');

  // MemoryPage
  m.set('memory.title', 'Memory');
  m.set('memory.subtitle', 'ClawdBot remembers facts, preferences, and instructions across sessions.');
  m.set('memory.add', '+ Add');
  m.set('memory.save', 'Save');
  m.set('memory.all', 'All');
  m.set('memory.fact', 'fact');
  m.set('memory.preference', 'preference');
  m.set('memory.instruction', 'instruction');
  m.set('memory.entries', ' entries');
  m.set('memory.empty', 'No memories yet');
  m.set('memory.placeholder', 'What should ClawdBot remember?');
  m.set('memory.clearTitle', 'Clear All Memory');
  m.set('memory.clearMessage', 'Permanently delete all stored memories?');
  m.set('memory.cancel', 'Cancel');
  m.set('memory.clear', 'Clear');

  // SettingsPage
  m.set('settings.title', 'Settings');
  m.set('settings.aiProvider', 'AI PROVIDER');
  m.set('settings.provider', 'Provider');
  m.set('settings.apiKey', 'API Key');
  m.set('settings.apiKeyPlaceholder', 'Enter your API key');
  m.set('settings.apiKeyNotRequired', 'Not required');
  m.set('settings.show', 'Show');
  m.set('settings.hide', 'Hide');
  m.set('settings.model', 'Model');
  m.set('settings.modelPlaceholder', 'Model name');
  m.set('settings.baseUrl', 'Base URL');
  m.set('settings.baseUrlDesc', 'Leave empty for official API, or enter proxy/relay URL');
  m.set('settings.generation', 'GENERATION');
  m.set('settings.temperature', 'Temperature');
  m.set('settings.gateway', 'GATEWAY / NODE MODE');
  m.set('settings.nodeMode', 'Node Mode');
  m.set('settings.nodeModeDesc', 'Connect to OpenClaw Gateway');
  m.set('settings.gatewayHost', 'Gateway Host');
  m.set('settings.gatewayHostPlaceholder', '192.168.1.100 or hostname');
  m.set('settings.port', 'Port');
  m.set('settings.useTls', 'Use TLS (wss://)');
  m.set('settings.token', 'Token');
  m.set('settings.tokenDesc', 'Shared token from your OpenClaw Gateway');
  m.set('settings.tokenPlaceholder', 'e.g. d71a61ab...');
  m.set('settings.password', 'Password (optional)');
  m.set('settings.passwordPlaceholder', 'Gateway password');
  m.set('settings.status', 'Status');
  m.set('settings.connect', 'Connect');
  m.set('settings.disconnect', 'Disconnect');
  m.set('settings.caps', 'Node Capabilities');
  m.set('settings.capLocation', 'Location (GPS)');
  m.set('settings.capCamera', 'Camera (Photo/Video)');
  m.set('settings.capCanvas', 'Canvas (WebView)');
  m.set('settings.capScreen', 'Screenshot/Recording');
  m.set('settings.capNotification', 'Notifications');
  m.set('settings.capMicrophone', 'Microphone (Record)');
  m.set('settings.capSpeaker', 'Speaker (TTS/Playback)');
  m.set('settings.capEmail', 'Email (Send)');
  m.set('settings.about', 'ABOUT');
  m.set('settings.app', 'App');
  m.set('settings.appValue', 'ClawdBot for HarmonyOS');
  m.set('settings.version', 'Version');
  m.set('settings.basedOn', 'Based on');
  m.set('settings.platform', 'Platform');
  m.set('settings.save', 'Save Settings');
  m.set('settings.saved', 'Settings saved');
  m.set('settings.saveFailed', 'Save failed: ');
  m.set('settings.enterHost', 'Please enter gateway host');
  m.set('settings.language', 'Language');
  m.set('settings.languageDesc', 'Interface display language');
  m.set('settings.langZh', 'ä¸­æ–‡');
  m.set('settings.langEn', 'English');

  // LogPage
  m.set('tab.logs', 'Logs');
  m.set('log.title', 'Runtime Logs');
  m.set('log.clear', 'Clear');
  m.set('log.entries', 'entries');
  m.set('log.empty', 'No logs yet');
  m.set('log.copy', 'Copy');
  m.set('log.export', 'Export');
  m.set('log.copied', 'Copied to clipboard');
  m.set('log.exported', 'Exported to file');
  m.set('log.exportFail', 'Export failed');
  m.set('log.recording', 'Recording');
  m.set('log.readMore', 'Read more');
  m.set('log.showLess', 'Show less');
  m.set('log.filePath', 'File path');

  // LoginPage
  m.set('login.signUpTitle', 'First-time Setup');
  m.set('login.signInTitle', 'Sign In');
  m.set('login.address', 'Gateway Address');
  m.set('login.addressPlaceholder', '192.168.1.100:18789');
  m.set('login.token', 'Token');
  m.set('login.tokenPlaceholder', 'Shared token from admin');
  m.set('login.setPassword', 'Set Password');
  m.set('login.setPasswordPlaceholder', 'Set a login password');
  m.set('login.confirmPassword', 'Confirm Password');
  m.set('login.confirmPasswordPlaceholder', 'Enter password again');
  m.set('login.password', 'Password');
  m.set('login.passwordPlaceholder', 'Enter your password');
  m.set('login.signUpButton', 'Register & Connect');
  m.set('login.signInButton', 'Sign In');
  m.set('login.connecting', 'Connecting...');
  m.set('login.switchToSignIn', 'Already set up? Sign in');
  m.set('login.switchToSignUp', 'Reconfigure gateway');
  m.set('login.error.emptyAddress', 'Please enter gateway address');
  m.set('login.error.emptyToken', 'Please enter token');
  m.set('login.error.emptyPassword', 'Please enter password');
  m.set('login.error.passwordMismatch', 'Passwords do not match');
  m.set('login.error.wrongPassword', 'Wrong password');
  m.set('login.error.authFailed', 'Authentication failed, check token');
  m.set('login.error.connectionFailed', 'Connection failed, check address');
  m.set('login.error.timeout', 'Connection timed out, check network');

  // Settings - Logout
  m.set('settings.logout', 'Logout');
  m.set('settings.logoutConfirmTitle', 'Logout');
  m.set('settings.logoutConfirmMessage', 'You will need to re-enter password to login. Are you sure?');
  m.set('settings.cancel', 'Cancel');
  m.set('settings.confirm', 'Confirm');
  m.set('settings.gatewayAddress', 'Gateway Address');

  // Connection states
  m.set('state.offline', 'Offline');
  m.set('state.connecting', 'Connectingâ€¦');
  m.set('state.connected', 'Connected');
  m.set('state.reconnecting', 'Reconnectingâ€¦');
  m.set('state.error', 'Error');

  return m;
}

const zhMap: Map<string, string> = buildZh();
const enMap: Map<string, string> = buildEn();

/**
 * Global language state singleton.
 * Pages observe lang changes via listener pattern.
 */
export class I18n {
  private static currentLang: LangCode = 'zh';
  private static listeners: Array<() => void> = [];

  static init(lang: LangCode): void {
    I18n.currentLang = lang;
  }

  static get lang(): LangCode {
    return I18n.currentLang;
  }

  static setLang(lang: LangCode): void {
    I18n.currentLang = lang;
    for (let listener of I18n.listeners) {
      try { listener(); } catch { /* ignore */ }
    }
  }

  static addListener(fn: () => void): void {
    I18n.listeners.push(fn);
  }

  static removeListener(fn: () => void): void {
    let idx = I18n.listeners.indexOf(fn);
    if (idx >= 0) {
      I18n.listeners.splice(idx, 1);
    }
  }

  /** Get translated string by key. */
  static t(key: string): string {
    let map: Map<string, string> = I18n.currentLang === 'zh' ? zhMap : enMap;
    let val = map.get(key);
    if (val !== undefined) {
      return val;
    }
    // Fallback to English
    let enVal = enMap.get(key);
    if (enVal !== undefined) {
      return enVal;
    }
    return key;
  }
}

/** Shorthand function for I18n.t() */
export function t(key: string): string {
  return I18n.t(key);
}
